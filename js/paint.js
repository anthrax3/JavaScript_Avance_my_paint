"use strict";
var Paint, paint,
  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

Paint = (function() {
  function Paint(canvas) {
    this.ev_canvas = __bind(this.ev_canvas, this);
    this.canvas = $('#' + canvas);
    this.context = this.canvas[0].getContext('2d');
    this.context.lineJoin = 'round';
    this.context.lineCap = 'round';
    this.canvasOffset = this.canvas.offset();
    this.mouse = {
      x: 0,
      y: 0
    };
    this.redo_list = [];
    this.undo_list = [];
    $('#size').bind('mousemove change', (function(_this) {
      return function() {
        return $('#sizepx').text($('#size').val());
      };
    })(this));
    $("#fill").change((function(_this) {
      return function(e) {
        return _this.initCanvas();
      };
    })(this));
    $('button').click((function(_this) {
      return function(e) {
        if (e.target.id === "save") {
          window.open(_this.canvas[0].toDataURL());
          return;
        }
        if (e.target.id === "redo") {
          _this.redo();
          return;
        }
        if (e.target.id === "undo") {
          _this.undo();
          return;
        }
        return _this.selectTool(e.target.id);
      };
    })(this));
    this.initCanvas();
  }

  Paint.prototype.selectTool = function(tool) {
    this.tool = tool;
    $('.active').removeClass('active');
    $('#' + this.tool).addClass('active');
    return this.initCanvas();
  };

  Paint.prototype.initCanvas = function() {
    this.canvas.unbind("mousemove").unbind("mouseup").unbind("mousedown").unbind("click");
    this.canvas.contextmenu((function(_this) {
      return function(e) {
        return false;
      };
    })(this));
    this.ev_canvas();
    if (this.tool !== 'text' && this.tool !== 'picker' && this.tool !== 'undo' && this.tool !== 'redo') {
      return this.canvas.bind('mousedown mousemove mouseup', this.ev_canvas);
    }
  };

  Paint.prototype.ev_canvas = function() {
    this.context.strokeStyle = $('#color').val();
    this.context.fillStyle = $('#color2').val();
    this.context.lineWidth = $('#size').val();
    this.offsetX = this.canvasOffset.left;
    this.offsetY = this.canvasOffset.top;
    switch (this.tool) {
      case "picker":
        return this.picker();
      case "line":
        return this.line();
      case "care":
        return this.care();
      case "circle":
        return this.circle();
      case "gomme":
        return this.gomme();
      case "new":
        return this["new"]();
      case "text":
        return this.text();
      case "save":
        return this.save();
      default:
        return this.pencil();
    }
  };

  Paint.prototype.picker = function() {
    return this.canvas.mousedown((function(_this) {
      return function(e) {
        var componentToHex, rgbToHex, tmp;
        tmp = _this.context.getImageData(e.clientX - _this.offsetX, e.clientY - _this.offsetY, 1, 1);
        componentToHex = function(color) {
          var hex;
          hex = color.toString(16);
          if (hex.length === 1) {
            return "0" + hex;
          } else {
            return hex;
          }
        };
        rgbToHex = function(r, g, b) {
          return "#" + componentToHex(r) + componentToHex(g) + componentToHex(b);
        };
        if (event.which === 1) {
          if (tmp.data[3] === 0) {
            return $('#color').val("#ffffff");
          } else {
            return $('#color').val(rgbToHex(tmp.data[0], tmp.data[1], tmp.data[2]));
          }
        } else {
          if (tmp.data[3] === 0) {
            return $('#color2').val("#ffffff");
          } else {
            return $('#color2').val(rgbToHex(tmp.data[0], tmp.data[1], tmp.data[2]));
          }
        }
      };
    })(this));
  };

  Paint.prototype.pencil = function() {
    this.canvas.mousedown((function(_this) {
      return function(e) {
        _this.isDrawing = true;
        _this.saveState();
        _this.context.moveTo(e.clientX - _this.offsetX, e.clientY - _this.offsetY);
        _this.context.beginPath();
        _this.context.arc(e.clientX - _this.offsetX, e.clientY - _this.offsetY, $('#size').val() / 100, 0, 2 * Math.PI);
        return _this.context.stroke();
      };
    })(this));
    this.canvas.mousemove((function(_this) {
      return function(e) {
        if (_this.isDrawing) {
          _this.context.lineTo(e.clientX - _this.offsetX, e.clientY - _this.offsetY);
          return _this.context.stroke();
        }
      };
    })(this));
    return this.canvas.mouseup((function(_this) {
      return function() {
        _this.isDrawing = false;
        return _this.initCanvas();
      };
    })(this));
  };

  Paint.prototype.line = function() {
    this.canvas.mousedown((function(_this) {
      return function(e) {
        _this.isDrawing = true;
        _this.saveState();
        _this.mouse.x = e.clientX - _this.offsetX;
        _this.mouse.y = e.clientY - _this.offsetY;
        return _this.tmp = _this.context.getImageData(0, 0, _this.canvas[0].width, _this.canvas[0].height);
      };
    })(this));
    return this.canvas.mousemove((function(_this) {
      return function(e) {
        if (_this.isDrawing) {
          _this.context.clearRect(0, 0, _this.canvas[0].width, _this.canvas[0].height);
          _this.context.beginPath();
          _this.context.putImageData(_this.tmp, 0, 0);
          _this.context.moveTo(_this.mouse.x, _this.mouse.y);
          _this.context.lineTo(e.clientX - _this.offsetX, e.clientY - _this.offsetY);
          _this.context.closePath();
          _this.context.stroke();
          _this.canvas.mousedown(function(e) {
            _this.isDrawing = false;
            return _this.initCanvas();
          });
          return _this.canvas.mouseup(function(e) {
            _this.isDrawing = false;
            return _this.initCanvas();
          });
        }
      };
    })(this));
  };

  Paint.prototype.care = function() {
    this.canvas.mousedown((function(_this) {
      return function(e) {
        _this.isDrawing = true;
        _this.saveState();
        _this.mouse.x = e.clientX - _this.offsetX;
        _this.mouse.y = e.clientY - _this.offsetY;
        return _this.tmp = _this.context.getImageData(0, 0, _this.canvas[0].width, _this.canvas[0].height);
      };
    })(this));
    return this.canvas.mousemove((function(_this) {
      return function(e) {
        var h, w, x, y;
        if (_this.isDrawing) {
          x = Math.min(e.clientX - _this.offsetX, _this.mouse.x);
          y = Math.min(e.clientY - _this.offsetY, _this.mouse.y);
          w = Math.abs(e.clientX - _this.offsetX - _this.mouse.x);
          h = Math.abs(e.clientY - _this.offsetY - _this.mouse.y);
          _this.context.clearRect(0, 0, _this.canvas[0].width, _this.canvas[0].height);
          _this.context.putImageData(_this.tmp, 0, 0);
          _this.context.beginPath();
          _this.context.rect(x, y, w, h);
          _this.context.closePath();
          if ($("#fill").is(":checked")) {
            _this.context.fill();
          }
          _this.context.stroke();
          _this.canvas.mousedown(function(e) {
            _this.isDrawing = false;
            return _this.initCanvas();
          });
          return _this.canvas.mouseup(function(e) {
            _this.isDrawing = false;
            return _this.initCanvas();
          });
        }
      };
    })(this));
  };

  Paint.prototype.circle = function() {
    this.canvas.mousedown((function(_this) {
      return function(e) {
        _this.isDrawing = true;
        _this.saveState();
        _this.mouse.x = e.clientX - _this.offsetX;
        _this.mouse.y = e.clientY - _this.offsetY;
        return _this.tmp = _this.context.getImageData(0, 0, _this.canvas[0].width, _this.canvas[0].height);
      };
    })(this));
    return this.canvas.mousemove((function(_this) {
      return function(e) {
        var r, x2, y2;
        if (_this.isDrawing) {
          x2 = Math.abs(e.clientX - _this.offsetX);
          y2 = Math.abs(e.clientY - _this.offsetY);
          r = Math.sqrt(Math.pow(x2 - _this.mouse.x, 2) + Math.pow(y2 - _this.mouse.y, 2));
          _this.context.clearRect(0, 0, _this.canvas[0].width, _this.canvas[0].height);
          _this.context.putImageData(_this.tmp, 0, 0);
          _this.context.beginPath();
          _this.context.arc(_this.mouse.x, _this.mouse.y, r, 0, 2 * Math.PI);
          if ($("#fill").is(":checked")) {
            _this.context.fill();
          }
          _this.context.stroke();
          _this.canvas.mousedown(function(e) {
            _this.isDrawing = false;
            return _this.initCanvas();
          });
          return _this.canvas.mouseup(function(e) {
            _this.isDrawing = false;
            return _this.initCanvas();
          });
        }
      };
    })(this));
  };

  Paint.prototype.text = function() {
    return this.canvas.click((function(_this) {
      return function(e) {
        var text;
        text = prompt("Rentre ton text");
        _this.saveState();
        if (text !== null) {
          _this.mouse.x = e.clientX - _this.offsetX;
          _this.mouse.y = e.clientY - _this.offsetY;
          _this.context.font = $('#size').val() + "pt Calibri";
          _this.context.fillStyle = $('#color').val();
          _this.context.fillText(text, _this.mouse.x, _this.mouse.y);
          return _this.initCanvas();
        }
      };
    })(this));
  };

  Paint.prototype.gomme = function() {
    this.canvas.mousedown((function(_this) {
      return function(e) {
        _this.isDrawing = true;
        _this.saveState();
        _this.context.moveTo(e.clientX - _this.offsetX, e.clientY - _this.offsetY);
        return _this.context.beginPath();
      };
    })(this));
    this.canvas.mousemove((function(_this) {
      return function(e) {
        if (_this.isDrawing) {
          _this.context.strokeStyle = "#FFFFFF";
          _this.context.lineTo(e.clientX - _this.offsetX, e.clientY - _this.offsetY);
          return _this.context.stroke();
        }
      };
    })(this));
    return this.canvas.mouseup((function(_this) {
      return function() {
        _this.isDrawing = false;
        _this.context.strokeStyle = $('#color').val();
        return _this.initCanvas();
      };
    })(this));
  };

  Paint.prototype["new"] = function() {
    this.saveState();
    this.context.clearRect(0, 0, this.canvas[0].width, this.canvas[0].height);
    return this.selectTool("pencil");
  };

  Paint.prototype.saveState = function(list, keep_redo) {
    keep_redo = keep_redo || false;
    if (!keep_redo) {
      this.redo_list = [];
    }
    return (list || this.undo_list).push(this.canvas[0].toDataURL());
  };

  Paint.prototype.undo = function() {
    return this.restoreState(this.undo_list, this.redo_list);
  };

  Paint.prototype.redo = function() {
    return this.restoreState(this.redo_list, this.undo_list);
  };

  Paint.prototype.restoreState = function(pop, push) {
    var img, restore_state;
    if (pop.length) {
      this.saveState(push, true);
      restore_state = pop.pop();
      img = new Image();
      img.src = restore_state;
      return img.onload = (function(_this) {
        return function() {
          _this.context.clearRect(0, 0, _this.canvas[0].width, _this.canvas[0].height);
          return _this.context.drawImage(img, 0, 0, _this.canvas[0].width, _this.canvas[0].height, 0, 0, _this.canvas[0].width, _this.canvas[0].height);
        };
      })(this);
    }
  };

  return Paint;

})();

paint = new Paint('canvas');

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhaW50LmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFBLENBQUE7QUFBQSxJQUFBLFlBQUE7RUFBQSxrRkFBQTs7QUFBQTtBQUdpQixFQUFBLGVBQUMsTUFBRCxHQUFBO0FBQ1QsaURBQUEsQ0FBQTtBQUFBLElBQUEsSUFBQyxDQUFBLE1BQUQsR0FBVSxDQUFBLENBQUUsR0FBQSxHQUFLLE1BQVAsQ0FBVixDQUFBO0FBQUEsSUFFQSxJQUFDLENBQUEsT0FBRCxHQUFXLElBQUMsQ0FBQSxNQUFPLENBQUEsQ0FBQSxDQUFFLENBQUMsVUFBWCxDQUFzQixJQUF0QixDQUZYLENBQUE7QUFBQSxJQUdBLElBQUMsQ0FBQSxPQUFPLENBQUMsUUFBVCxHQUFvQixPQUhwQixDQUFBO0FBQUEsSUFJQSxJQUFDLENBQUEsT0FBTyxDQUFDLE9BQVQsR0FBbUIsT0FKbkIsQ0FBQTtBQUFBLElBS0EsSUFBQyxDQUFBLFlBQUQsR0FBZ0IsSUFBQyxDQUFBLE1BQU0sQ0FBQyxNQUFSLENBQUEsQ0FMaEIsQ0FBQTtBQUFBLElBTUEsSUFBQyxDQUFBLEtBQUQsR0FBUztBQUFBLE1BQUMsQ0FBQSxFQUFHLENBQUo7QUFBQSxNQUFPLENBQUEsRUFBRyxDQUFWO0tBTlQsQ0FBQTtBQUFBLElBT0EsSUFBQyxDQUFBLFNBQUQsR0FBYSxFQVBiLENBQUE7QUFBQSxJQVFBLElBQUMsQ0FBQSxTQUFELEdBQWEsRUFSYixDQUFBO0FBQUEsSUFVQSxDQUFBLENBQUUsT0FBRixDQUFVLENBQUMsSUFBWCxDQUFnQixrQkFBaEIsRUFBb0MsQ0FBQSxTQUFBLEtBQUEsR0FBQTthQUFBLFNBQUEsR0FBQTtlQUNoQyxDQUFBLENBQUUsU0FBRixDQUFZLENBQUMsSUFBYixDQUFrQixDQUFBLENBQUUsT0FBRixDQUFVLENBQUMsR0FBWCxDQUFBLENBQWxCLEVBRGdDO01BQUEsRUFBQTtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBcEMsQ0FWQSxDQUFBO0FBQUEsSUFhQSxDQUFBLENBQUUsT0FBRixDQUFVLENBQUMsTUFBWCxDQUFrQixDQUFBLFNBQUEsS0FBQSxHQUFBO2FBQUEsU0FBQyxDQUFELEdBQUE7ZUFDZCxLQUFDLENBQUEsVUFBRCxDQUFBLEVBRGM7TUFBQSxFQUFBO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUFsQixDQWJBLENBQUE7QUFBQSxJQWdCQSxDQUFBLENBQUUsUUFBRixDQUFXLENBQUMsS0FBWixDQUFrQixDQUFBLFNBQUEsS0FBQSxHQUFBO2FBQUEsU0FBQyxDQUFELEdBQUE7QUFDZCxRQUFBLElBQUksQ0FBQyxDQUFDLE1BQU0sQ0FBQyxFQUFULEtBQWUsTUFBbkI7QUFDSSxVQUFBLE1BQU0sQ0FBQyxJQUFQLENBQVksS0FBQyxDQUFBLE1BQU8sQ0FBQSxDQUFBLENBQUUsQ0FBQyxTQUFYLENBQUEsQ0FBWixDQUFBLENBQUE7QUFDQSxnQkFBQSxDQUZKO1NBQUE7QUFHQSxRQUFBLElBQUksQ0FBQyxDQUFDLE1BQU0sQ0FBQyxFQUFULEtBQWUsTUFBbkI7QUFDSSxVQUFBLEtBQUMsQ0FBQSxJQUFELENBQUEsQ0FBQSxDQUFBO0FBQ0EsZ0JBQUEsQ0FGSjtTQUhBO0FBTUEsUUFBQSxJQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsRUFBVCxLQUFlLE1BQWxCO0FBQ0ksVUFBQSxLQUFDLENBQUEsSUFBRCxDQUFBLENBQUEsQ0FBQTtBQUNBLGdCQUFBLENBRko7U0FOQTtlQVNBLEtBQUMsQ0FBQSxVQUFELENBQVksQ0FBQyxDQUFDLE1BQU0sQ0FBQyxFQUFyQixFQVZjO01BQUEsRUFBQTtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBbEIsQ0FoQkEsQ0FBQTtBQUFBLElBMkJBLElBQUMsQ0FBQSxVQUFELENBQUEsQ0EzQkEsQ0FEUztFQUFBLENBQWI7O0FBQUEsa0JBOEJBLFVBQUEsR0FBWSxTQUFDLElBQUQsR0FBQTtBQUNSLElBQUEsSUFBQyxDQUFBLElBQUQsR0FBUSxJQUFSLENBQUE7QUFBQSxJQUNBLENBQUEsQ0FBRSxTQUFGLENBQVksQ0FBQyxXQUFiLENBQXlCLFFBQXpCLENBREEsQ0FBQTtBQUFBLElBRUEsQ0FBQSxDQUFFLEdBQUEsR0FBSSxJQUFDLENBQUEsSUFBUCxDQUFZLENBQUMsUUFBYixDQUFzQixRQUF0QixDQUZBLENBQUE7V0FHQSxJQUFDLENBQUEsVUFBRCxDQUFBLEVBSlE7RUFBQSxDQTlCWixDQUFBOztBQUFBLGtCQW9DQSxVQUFBLEdBQVksU0FBQSxHQUFBO0FBQ1IsSUFBQSxJQUFDLENBQUEsTUFBTSxDQUFDLE1BQVIsQ0FBZSxXQUFmLENBQTJCLENBQUMsTUFBNUIsQ0FBbUMsU0FBbkMsQ0FBNkMsQ0FBQyxNQUE5QyxDQUFxRCxXQUFyRCxDQUFpRSxDQUFDLE1BQWxFLENBQXlFLE9BQXpFLENBQUEsQ0FBQTtBQUFBLElBQ0EsSUFBQyxDQUFBLE1BQU0sQ0FBQyxXQUFSLENBQW9CLENBQUEsU0FBQSxLQUFBLEdBQUE7YUFBQSxTQUFDLENBQUQsR0FBQTtBQUNoQixlQUFPLEtBQVAsQ0FEZ0I7TUFBQSxFQUFBO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUFwQixDQURBLENBQUE7QUFBQSxJQUdBLElBQUMsQ0FBQSxTQUFELENBQUEsQ0FIQSxDQUFBO0FBSUEsSUFBQSxJQUFHLElBQUMsQ0FBQSxJQUFELEtBQVMsTUFBVCxJQUFtQixJQUFDLENBQUEsSUFBRCxLQUFRLFFBQTNCLElBQXVDLElBQUMsQ0FBQSxJQUFELEtBQVMsTUFBaEQsSUFBMEQsSUFBQyxDQUFBLElBQUQsS0FBUyxNQUF0RTthQUNJLElBQUMsQ0FBQSxNQUFNLENBQUMsSUFBUixDQUFhLDZCQUFiLEVBQTRDLElBQUMsQ0FBQSxTQUE3QyxFQURKO0tBTFE7RUFBQSxDQXBDWixDQUFBOztBQUFBLGtCQTRDQSxTQUFBLEdBQVcsU0FBQSxHQUFBO0FBQ1AsSUFBQSxJQUFDLENBQUEsT0FBTyxDQUFDLFdBQVQsR0FBdUIsQ0FBQSxDQUFFLFFBQUYsQ0FBVyxDQUFDLEdBQVosQ0FBQSxDQUF2QixDQUFBO0FBQUEsSUFDQSxJQUFDLENBQUEsT0FBTyxDQUFDLFNBQVQsR0FBcUIsQ0FBQSxDQUFFLFNBQUYsQ0FBWSxDQUFDLEdBQWIsQ0FBQSxDQURyQixDQUFBO0FBQUEsSUFFQSxJQUFDLENBQUEsT0FBTyxDQUFDLFNBQVQsR0FBcUIsQ0FBQSxDQUFFLE9BQUYsQ0FBVSxDQUFDLEdBQVgsQ0FBQSxDQUZyQixDQUFBO0FBQUEsSUFHQSxJQUFDLENBQUEsT0FBRCxHQUFXLElBQUMsQ0FBQSxZQUFZLENBQUMsSUFIekIsQ0FBQTtBQUFBLElBSUEsSUFBQyxDQUFBLE9BQUQsR0FBVyxJQUFDLENBQUEsWUFBWSxDQUFDLEdBSnpCLENBQUE7QUFLQSxZQUFPLElBQUMsQ0FBQSxJQUFSO0FBQUEsV0FDUyxRQURUO2VBRVEsSUFBQyxDQUFBLE1BQUQsQ0FBQSxFQUZSO0FBQUEsV0FHUyxNQUhUO2VBSVEsSUFBQyxDQUFBLElBQUQsQ0FBQSxFQUpSO0FBQUEsV0FLUyxNQUxUO2VBTVEsSUFBQyxDQUFBLElBQUQsQ0FBQSxFQU5SO0FBQUEsV0FPUyxRQVBUO2VBUVEsSUFBQyxDQUFBLE1BQUQsQ0FBQSxFQVJSO0FBQUEsV0FTUyxPQVRUO2VBVVEsSUFBQyxDQUFBLEtBQUQsQ0FBQSxFQVZSO0FBQUEsV0FXUyxLQVhUO2VBWVEsSUFBQyxDQUFBLEtBQUEsQ0FBRCxDQUFBLEVBWlI7QUFBQSxXQWFTLE1BYlQ7ZUFjUSxJQUFDLENBQUEsSUFBRCxDQUFBLEVBZFI7QUFBQSxXQWVTLE1BZlQ7ZUFnQlEsSUFBQyxDQUFBLElBQUQsQ0FBQSxFQWhCUjtBQUFBO2VBa0JRLElBQUMsQ0FBQSxNQUFELENBQUEsRUFsQlI7QUFBQSxLQU5PO0VBQUEsQ0E1Q1gsQ0FBQTs7QUFBQSxrQkFzRUEsTUFBQSxHQUFRLFNBQUEsR0FBQTtXQUNKLElBQUMsQ0FBQSxNQUFNLENBQUMsU0FBUixDQUFrQixDQUFBLFNBQUEsS0FBQSxHQUFBO2FBQUEsU0FBQyxDQUFELEdBQUE7QUFDZCxZQUFBLDZCQUFBO0FBQUEsUUFBQSxHQUFBLEdBQU0sS0FBQyxDQUFBLE9BQU8sQ0FBQyxZQUFULENBQXNCLENBQUMsQ0FBQyxPQUFGLEdBQVksS0FBQyxDQUFBLE9BQW5DLEVBQTRDLENBQUMsQ0FBQyxPQUFGLEdBQVksS0FBQyxDQUFBLE9BQXpELEVBQWtFLENBQWxFLEVBQXFFLENBQXJFLENBQU4sQ0FBQTtBQUFBLFFBQ0EsY0FBQSxHQUFpQixTQUFDLEtBQUQsR0FBQTtBQUNiLGNBQUEsR0FBQTtBQUFBLFVBQUEsR0FBQSxHQUFNLEtBQUssQ0FBQyxRQUFOLENBQWUsRUFBZixDQUFOLENBQUE7QUFDQyxVQUFBLElBQUcsR0FBRyxDQUFDLE1BQUosS0FBYyxDQUFqQjttQkFBd0IsR0FBQSxHQUFNLElBQTlCO1dBQUEsTUFBQTttQkFBdUMsSUFBdkM7V0FGWTtRQUFBLENBRGpCLENBQUE7QUFBQSxRQUlBLFFBQUEsR0FBVyxTQUFDLENBQUQsRUFBSSxDQUFKLEVBQU8sQ0FBUCxHQUFBO2lCQUNQLEdBQUEsR0FBTSxjQUFBLENBQWUsQ0FBZixDQUFOLEdBQTBCLGNBQUEsQ0FBZSxDQUFmLENBQTFCLEdBQThDLGNBQUEsQ0FBZSxDQUFmLEVBRHZDO1FBQUEsQ0FKWCxDQUFBO0FBT0EsUUFBQSxJQUFHLEtBQUssQ0FBQyxLQUFOLEtBQWUsQ0FBbEI7QUFDSSxVQUFBLElBQUcsR0FBRyxDQUFDLElBQUssQ0FBQSxDQUFBLENBQVQsS0FBZSxDQUFsQjttQkFDSSxDQUFBLENBQUUsUUFBRixDQUFXLENBQUMsR0FBWixDQUFnQixTQUFoQixFQURKO1dBQUEsTUFBQTttQkFHSSxDQUFBLENBQUUsUUFBRixDQUFXLENBQUMsR0FBWixDQUFnQixRQUFBLENBQVMsR0FBRyxDQUFDLElBQUssQ0FBQSxDQUFBLENBQWxCLEVBQXNCLEdBQUcsQ0FBQyxJQUFLLENBQUEsQ0FBQSxDQUEvQixFQUFtQyxHQUFHLENBQUMsSUFBSyxDQUFBLENBQUEsQ0FBNUMsQ0FBaEIsRUFISjtXQURKO1NBQUEsTUFBQTtBQU1JLFVBQUEsSUFBRyxHQUFHLENBQUMsSUFBSyxDQUFBLENBQUEsQ0FBVCxLQUFlLENBQWxCO21CQUNJLENBQUEsQ0FBRSxTQUFGLENBQVksQ0FBQyxHQUFiLENBQWlCLFNBQWpCLEVBREo7V0FBQSxNQUFBO21CQUdJLENBQUEsQ0FBRSxTQUFGLENBQVksQ0FBQyxHQUFiLENBQWlCLFFBQUEsQ0FBUyxHQUFHLENBQUMsSUFBSyxDQUFBLENBQUEsQ0FBbEIsRUFBc0IsR0FBRyxDQUFDLElBQUssQ0FBQSxDQUFBLENBQS9CLEVBQW1DLEdBQUcsQ0FBQyxJQUFLLENBQUEsQ0FBQSxDQUE1QyxDQUFqQixFQUhKO1dBTko7U0FSYztNQUFBLEVBQUE7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQWxCLEVBREk7RUFBQSxDQXRFUixDQUFBOztBQUFBLGtCQTBGQSxNQUFBLEdBQVEsU0FBQSxHQUFBO0FBQ0osSUFBQSxJQUFDLENBQUEsTUFBTSxDQUFDLFNBQVIsQ0FBa0IsQ0FBQSxTQUFBLEtBQUEsR0FBQTthQUFBLFNBQUMsQ0FBRCxHQUFBO0FBQ2QsUUFBQSxLQUFDLENBQUEsU0FBRCxHQUFhLElBQWIsQ0FBQTtBQUFBLFFBQ0EsS0FBQyxDQUFBLFNBQUQsQ0FBQSxDQURBLENBQUE7QUFBQSxRQUVBLEtBQUMsQ0FBQSxPQUFPLENBQUMsTUFBVCxDQUFnQixDQUFDLENBQUMsT0FBRixHQUFZLEtBQUMsQ0FBQSxPQUE3QixFQUFzQyxDQUFDLENBQUMsT0FBRixHQUFZLEtBQUMsQ0FBQSxPQUFuRCxDQUZBLENBQUE7QUFBQSxRQUdBLEtBQUMsQ0FBQSxPQUFPLENBQUMsU0FBVCxDQUFBLENBSEEsQ0FBQTtBQUFBLFFBSUEsS0FBQyxDQUFBLE9BQU8sQ0FBQyxHQUFULENBQWEsQ0FBQyxDQUFDLE9BQUYsR0FBWSxLQUFDLENBQUEsT0FBMUIsRUFBbUMsQ0FBQyxDQUFDLE9BQUYsR0FBWSxLQUFDLENBQUEsT0FBaEQsRUFBeUQsQ0FBQSxDQUFFLE9BQUYsQ0FBVSxDQUFDLEdBQVgsQ0FBQSxDQUFBLEdBQW1CLEdBQTVFLEVBQWlGLENBQWpGLEVBQW9GLENBQUEsR0FBRSxJQUFJLENBQUMsRUFBM0YsQ0FKQSxDQUFBO2VBS0EsS0FBQyxDQUFBLE9BQU8sQ0FBQyxNQUFULENBQUEsRUFOYztNQUFBLEVBQUE7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQWxCLENBQUEsQ0FBQTtBQUFBLElBUUEsSUFBQyxDQUFBLE1BQU0sQ0FBQyxTQUFSLENBQWtCLENBQUEsU0FBQSxLQUFBLEdBQUE7YUFBQSxTQUFDLENBQUQsR0FBQTtBQUNkLFFBQUEsSUFBRyxLQUFDLENBQUEsU0FBSjtBQUNJLFVBQUEsS0FBQyxDQUFBLE9BQU8sQ0FBQyxNQUFULENBQWdCLENBQUMsQ0FBQyxPQUFGLEdBQVksS0FBQyxDQUFBLE9BQTdCLEVBQXNDLENBQUMsQ0FBQyxPQUFGLEdBQVksS0FBQyxDQUFBLE9BQW5ELENBQUEsQ0FBQTtpQkFDQSxLQUFDLENBQUEsT0FBTyxDQUFDLE1BQVQsQ0FBQSxFQUZKO1NBRGM7TUFBQSxFQUFBO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUFsQixDQVJBLENBQUE7V0FhQSxJQUFDLENBQUEsTUFBTSxDQUFDLE9BQVIsQ0FBZ0IsQ0FBQSxTQUFBLEtBQUEsR0FBQTthQUFBLFNBQUEsR0FBQTtBQUNaLFFBQUEsS0FBQyxDQUFBLFNBQUQsR0FBYSxLQUFiLENBQUE7ZUFDQSxLQUFDLENBQUEsVUFBRCxDQUFBLEVBRlk7TUFBQSxFQUFBO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUFoQixFQWRJO0VBQUEsQ0ExRlIsQ0FBQTs7QUFBQSxrQkE0R0EsSUFBQSxHQUFNLFNBQUEsR0FBQTtBQUNGLElBQUEsSUFBQyxDQUFBLE1BQU0sQ0FBQyxTQUFSLENBQWtCLENBQUEsU0FBQSxLQUFBLEdBQUE7YUFBQSxTQUFDLENBQUQsR0FBQTtBQUNkLFFBQUEsS0FBQyxDQUFBLFNBQUQsR0FBYSxJQUFiLENBQUE7QUFBQSxRQUNBLEtBQUMsQ0FBQSxTQUFELENBQUEsQ0FEQSxDQUFBO0FBQUEsUUFFQSxLQUFDLENBQUEsS0FBSyxDQUFDLENBQVAsR0FBVyxDQUFDLENBQUMsT0FBRixHQUFZLEtBQUMsQ0FBQSxPQUZ4QixDQUFBO0FBQUEsUUFHQSxLQUFDLENBQUEsS0FBSyxDQUFDLENBQVAsR0FBVyxDQUFDLENBQUMsT0FBRixHQUFZLEtBQUMsQ0FBQSxPQUh4QixDQUFBO2VBSUEsS0FBQyxDQUFBLEdBQUQsR0FBTyxLQUFDLENBQUEsT0FBTyxDQUFDLFlBQVQsQ0FBc0IsQ0FBdEIsRUFBeUIsQ0FBekIsRUFBNEIsS0FBQyxDQUFBLE1BQU8sQ0FBQSxDQUFBLENBQUUsQ0FBQyxLQUF2QyxFQUE4QyxLQUFDLENBQUEsTUFBTyxDQUFBLENBQUEsQ0FBRSxDQUFDLE1BQXpELEVBTE87TUFBQSxFQUFBO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUFsQixDQUFBLENBQUE7V0FPQSxJQUFDLENBQUEsTUFBTSxDQUFDLFNBQVIsQ0FBa0IsQ0FBQSxTQUFBLEtBQUEsR0FBQTthQUFBLFNBQUMsQ0FBRCxHQUFBO0FBQ2QsUUFBQSxJQUFHLEtBQUMsQ0FBQSxTQUFKO0FBQ0ksVUFBQSxLQUFDLENBQUEsT0FBTyxDQUFDLFNBQVQsQ0FBbUIsQ0FBbkIsRUFBc0IsQ0FBdEIsRUFBeUIsS0FBQyxDQUFBLE1BQU8sQ0FBQSxDQUFBLENBQUUsQ0FBQyxLQUFwQyxFQUEyQyxLQUFDLENBQUEsTUFBTyxDQUFBLENBQUEsQ0FBRSxDQUFDLE1BQXRELENBQUEsQ0FBQTtBQUFBLFVBQ0EsS0FBQyxDQUFBLE9BQU8sQ0FBQyxTQUFULENBQUEsQ0FEQSxDQUFBO0FBQUEsVUFFQSxLQUFDLENBQUEsT0FBTyxDQUFDLFlBQVQsQ0FBc0IsS0FBQyxDQUFBLEdBQXZCLEVBQTJCLENBQTNCLEVBQTZCLENBQTdCLENBRkEsQ0FBQTtBQUFBLFVBR0EsS0FBQyxDQUFBLE9BQU8sQ0FBQyxNQUFULENBQWdCLEtBQUMsQ0FBQSxLQUFLLENBQUMsQ0FBdkIsRUFBMEIsS0FBQyxDQUFBLEtBQUssQ0FBQyxDQUFqQyxDQUhBLENBQUE7QUFBQSxVQUlBLEtBQUMsQ0FBQSxPQUFPLENBQUMsTUFBVCxDQUFnQixDQUFDLENBQUMsT0FBRixHQUFZLEtBQUMsQ0FBQSxPQUE3QixFQUFzQyxDQUFDLENBQUMsT0FBRixHQUFZLEtBQUMsQ0FBQSxPQUFuRCxDQUpBLENBQUE7QUFBQSxVQUtBLEtBQUMsQ0FBQSxPQUFPLENBQUMsU0FBVCxDQUFBLENBTEEsQ0FBQTtBQUFBLFVBTUEsS0FBQyxDQUFBLE9BQU8sQ0FBQyxNQUFULENBQUEsQ0FOQSxDQUFBO0FBQUEsVUFRQSxLQUFDLENBQUEsTUFBTSxDQUFDLFNBQVIsQ0FBa0IsU0FBQyxDQUFELEdBQUE7QUFDZCxZQUFBLEtBQUMsQ0FBQSxTQUFELEdBQWEsS0FBYixDQUFBO21CQUNBLEtBQUMsQ0FBQSxVQUFELENBQUEsRUFGYztVQUFBLENBQWxCLENBUkEsQ0FBQTtpQkFZQSxLQUFDLENBQUEsTUFBTSxDQUFDLE9BQVIsQ0FBZ0IsU0FBQyxDQUFELEdBQUE7QUFDWixZQUFBLEtBQUMsQ0FBQSxTQUFELEdBQWEsS0FBYixDQUFBO21CQUNBLEtBQUMsQ0FBQSxVQUFELENBQUEsRUFGWTtVQUFBLENBQWhCLEVBYko7U0FEYztNQUFBLEVBQUE7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQWxCLEVBUkU7RUFBQSxDQTVHTixDQUFBOztBQUFBLGtCQXNJQSxJQUFBLEdBQU0sU0FBQSxHQUFBO0FBQ0YsSUFBQSxJQUFDLENBQUEsTUFBTSxDQUFDLFNBQVIsQ0FBa0IsQ0FBQSxTQUFBLEtBQUEsR0FBQTthQUFBLFNBQUMsQ0FBRCxHQUFBO0FBQ2QsUUFBQSxLQUFDLENBQUEsU0FBRCxHQUFhLElBQWIsQ0FBQTtBQUFBLFFBQ0EsS0FBQyxDQUFBLFNBQUQsQ0FBQSxDQURBLENBQUE7QUFBQSxRQUVBLEtBQUMsQ0FBQSxLQUFLLENBQUMsQ0FBUCxHQUFXLENBQUMsQ0FBQyxPQUFGLEdBQVksS0FBQyxDQUFBLE9BRnhCLENBQUE7QUFBQSxRQUdBLEtBQUMsQ0FBQSxLQUFLLENBQUMsQ0FBUCxHQUFXLENBQUMsQ0FBQyxPQUFGLEdBQVksS0FBQyxDQUFBLE9BSHhCLENBQUE7ZUFJQSxLQUFDLENBQUEsR0FBRCxHQUFPLEtBQUMsQ0FBQSxPQUFPLENBQUMsWUFBVCxDQUFzQixDQUF0QixFQUF5QixDQUF6QixFQUE0QixLQUFDLENBQUEsTUFBTyxDQUFBLENBQUEsQ0FBRSxDQUFDLEtBQXZDLEVBQThDLEtBQUMsQ0FBQSxNQUFPLENBQUEsQ0FBQSxDQUFFLENBQUMsTUFBekQsRUFMTztNQUFBLEVBQUE7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQWxCLENBQUEsQ0FBQTtXQU9BLElBQUMsQ0FBQSxNQUFNLENBQUMsU0FBUixDQUFrQixDQUFBLFNBQUEsS0FBQSxHQUFBO2FBQUEsU0FBQyxDQUFELEdBQUE7QUFDZCxZQUFBLFVBQUE7QUFBQSxRQUFBLElBQUcsS0FBQyxDQUFBLFNBQUo7QUFDSSxVQUFBLENBQUEsR0FBSSxJQUFJLENBQUMsR0FBTCxDQUFTLENBQUMsQ0FBQyxPQUFGLEdBQVksS0FBQyxDQUFBLE9BQXRCLEVBQWdDLEtBQUMsQ0FBQSxLQUFLLENBQUMsQ0FBdkMsQ0FBSixDQUFBO0FBQUEsVUFDQSxDQUFBLEdBQUksSUFBSSxDQUFDLEdBQUwsQ0FBUyxDQUFDLENBQUMsT0FBRixHQUFZLEtBQUMsQ0FBQSxPQUF0QixFQUFnQyxLQUFDLENBQUEsS0FBSyxDQUFDLENBQXZDLENBREosQ0FBQTtBQUFBLFVBRUEsQ0FBQSxHQUFJLElBQUksQ0FBQyxHQUFMLENBQVMsQ0FBQyxDQUFDLE9BQUYsR0FBWSxLQUFDLENBQUEsT0FBYixHQUF1QixLQUFDLENBQUEsS0FBSyxDQUFDLENBQXZDLENBRkosQ0FBQTtBQUFBLFVBR0EsQ0FBQSxHQUFJLElBQUksQ0FBQyxHQUFMLENBQVMsQ0FBQyxDQUFDLE9BQUYsR0FBWSxLQUFDLENBQUEsT0FBYixHQUF1QixLQUFDLENBQUEsS0FBSyxDQUFDLENBQXZDLENBSEosQ0FBQTtBQUFBLFVBSUEsS0FBQyxDQUFBLE9BQU8sQ0FBQyxTQUFULENBQW1CLENBQW5CLEVBQXNCLENBQXRCLEVBQXlCLEtBQUMsQ0FBQSxNQUFPLENBQUEsQ0FBQSxDQUFFLENBQUMsS0FBcEMsRUFBMkMsS0FBQyxDQUFBLE1BQU8sQ0FBQSxDQUFBLENBQUUsQ0FBQyxNQUF0RCxDQUpBLENBQUE7QUFBQSxVQUtBLEtBQUMsQ0FBQSxPQUFPLENBQUMsWUFBVCxDQUFzQixLQUFDLENBQUEsR0FBdkIsRUFBMkIsQ0FBM0IsRUFBNkIsQ0FBN0IsQ0FMQSxDQUFBO0FBQUEsVUFNQSxLQUFDLENBQUEsT0FBTyxDQUFDLFNBQVQsQ0FBQSxDQU5BLENBQUE7QUFBQSxVQU9BLEtBQUMsQ0FBQSxPQUFPLENBQUMsSUFBVCxDQUFjLENBQWQsRUFBaUIsQ0FBakIsRUFBb0IsQ0FBcEIsRUFBdUIsQ0FBdkIsQ0FQQSxDQUFBO0FBQUEsVUFRQSxLQUFDLENBQUEsT0FBTyxDQUFDLFNBQVQsQ0FBQSxDQVJBLENBQUE7QUFTQSxVQUFBLElBQUksQ0FBQSxDQUFFLE9BQUYsQ0FBVSxDQUFDLEVBQVgsQ0FBYyxVQUFkLENBQUo7QUFDSSxZQUFBLEtBQUMsQ0FBQSxPQUFPLENBQUMsSUFBVCxDQUFBLENBQUEsQ0FESjtXQVRBO0FBQUEsVUFXQSxLQUFDLENBQUEsT0FBTyxDQUFDLE1BQVQsQ0FBQSxDQVhBLENBQUE7QUFBQSxVQWFBLEtBQUMsQ0FBQSxNQUFNLENBQUMsU0FBUixDQUFrQixTQUFDLENBQUQsR0FBQTtBQUNkLFlBQUEsS0FBQyxDQUFBLFNBQUQsR0FBYSxLQUFiLENBQUE7bUJBQ0EsS0FBQyxDQUFBLFVBQUQsQ0FBQSxFQUZjO1VBQUEsQ0FBbEIsQ0FiQSxDQUFBO2lCQWlCQSxLQUFDLENBQUEsTUFBTSxDQUFDLE9BQVIsQ0FBZ0IsU0FBQyxDQUFELEdBQUE7QUFDWixZQUFBLEtBQUMsQ0FBQSxTQUFELEdBQWEsS0FBYixDQUFBO21CQUNBLEtBQUMsQ0FBQSxVQUFELENBQUEsRUFGWTtVQUFBLENBQWhCLEVBbEJKO1NBRGM7TUFBQSxFQUFBO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUFsQixFQVJFO0VBQUEsQ0F0SU4sQ0FBQTs7QUFBQSxrQkFxS0EsTUFBQSxHQUFRLFNBQUEsR0FBQTtBQUNKLElBQUEsSUFBQyxDQUFBLE1BQU0sQ0FBQyxTQUFSLENBQWtCLENBQUEsU0FBQSxLQUFBLEdBQUE7YUFBQSxTQUFDLENBQUQsR0FBQTtBQUNkLFFBQUEsS0FBQyxDQUFBLFNBQUQsR0FBYSxJQUFiLENBQUE7QUFBQSxRQUNBLEtBQUMsQ0FBQSxTQUFELENBQUEsQ0FEQSxDQUFBO0FBQUEsUUFFQSxLQUFDLENBQUEsS0FBSyxDQUFDLENBQVAsR0FBVyxDQUFDLENBQUMsT0FBRixHQUFZLEtBQUMsQ0FBQSxPQUZ4QixDQUFBO0FBQUEsUUFHQSxLQUFDLENBQUEsS0FBSyxDQUFDLENBQVAsR0FBVyxDQUFDLENBQUMsT0FBRixHQUFZLEtBQUMsQ0FBQSxPQUh4QixDQUFBO2VBSUEsS0FBQyxDQUFBLEdBQUQsR0FBTyxLQUFDLENBQUEsT0FBTyxDQUFDLFlBQVQsQ0FBc0IsQ0FBdEIsRUFBeUIsQ0FBekIsRUFBNEIsS0FBQyxDQUFBLE1BQU8sQ0FBQSxDQUFBLENBQUUsQ0FBQyxLQUF2QyxFQUE4QyxLQUFDLENBQUEsTUFBTyxDQUFBLENBQUEsQ0FBRSxDQUFDLE1BQXpELEVBTE87TUFBQSxFQUFBO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUFsQixDQUFBLENBQUE7V0FPQSxJQUFDLENBQUEsTUFBTSxDQUFDLFNBQVIsQ0FBa0IsQ0FBQSxTQUFBLEtBQUEsR0FBQTthQUFBLFNBQUMsQ0FBRCxHQUFBO0FBQ2QsWUFBQSxTQUFBO0FBQUEsUUFBQSxJQUFHLEtBQUMsQ0FBQSxTQUFKO0FBQ0ksVUFBQSxFQUFBLEdBQUssSUFBSSxDQUFDLEdBQUwsQ0FBUyxDQUFDLENBQUMsT0FBRixHQUFZLEtBQUMsQ0FBQSxPQUF0QixDQUFMLENBQUE7QUFBQSxVQUNBLEVBQUEsR0FBSyxJQUFJLENBQUMsR0FBTCxDQUFTLENBQUMsQ0FBQyxPQUFGLEdBQVksS0FBQyxDQUFBLE9BQXRCLENBREwsQ0FBQTtBQUFBLFVBRUEsQ0FBQSxHQUFJLElBQUksQ0FBQyxJQUFMLENBQVUsSUFBSSxDQUFDLEdBQUwsQ0FBVSxFQUFBLEdBQUssS0FBQyxDQUFBLEtBQUssQ0FBQyxDQUF0QixFQUEwQixDQUExQixDQUFBLEdBQStCLElBQUksQ0FBQyxHQUFMLENBQVUsRUFBQSxHQUFLLEtBQUMsQ0FBQSxLQUFLLENBQUMsQ0FBdEIsRUFBMEIsQ0FBMUIsQ0FBekMsQ0FGSixDQUFBO0FBQUEsVUFHQSxLQUFDLENBQUEsT0FBTyxDQUFDLFNBQVQsQ0FBbUIsQ0FBbkIsRUFBc0IsQ0FBdEIsRUFBeUIsS0FBQyxDQUFBLE1BQU8sQ0FBQSxDQUFBLENBQUUsQ0FBQyxLQUFwQyxFQUEyQyxLQUFDLENBQUEsTUFBTyxDQUFBLENBQUEsQ0FBRSxDQUFDLE1BQXRELENBSEEsQ0FBQTtBQUFBLFVBSUEsS0FBQyxDQUFBLE9BQU8sQ0FBQyxZQUFULENBQXNCLEtBQUMsQ0FBQSxHQUF2QixFQUEyQixDQUEzQixFQUE2QixDQUE3QixDQUpBLENBQUE7QUFBQSxVQUtBLEtBQUMsQ0FBQSxPQUFPLENBQUMsU0FBVCxDQUFBLENBTEEsQ0FBQTtBQUFBLFVBTUEsS0FBQyxDQUFBLE9BQU8sQ0FBQyxHQUFULENBQWEsS0FBQyxDQUFBLEtBQUssQ0FBQyxDQUFwQixFQUF1QixLQUFDLENBQUEsS0FBSyxDQUFDLENBQTlCLEVBQWlDLENBQWpDLEVBQW9DLENBQXBDLEVBQXVDLENBQUEsR0FBRSxJQUFJLENBQUMsRUFBOUMsQ0FOQSxDQUFBO0FBT0EsVUFBQSxJQUFJLENBQUEsQ0FBRSxPQUFGLENBQVUsQ0FBQyxFQUFYLENBQWMsVUFBZCxDQUFKO0FBQ0ksWUFBQSxLQUFDLENBQUEsT0FBTyxDQUFDLElBQVQsQ0FBQSxDQUFBLENBREo7V0FQQTtBQUFBLFVBU0EsS0FBQyxDQUFBLE9BQU8sQ0FBQyxNQUFULENBQUEsQ0FUQSxDQUFBO0FBQUEsVUFXQSxLQUFDLENBQUEsTUFBTSxDQUFDLFNBQVIsQ0FBa0IsU0FBQyxDQUFELEdBQUE7QUFDZCxZQUFBLEtBQUMsQ0FBQSxTQUFELEdBQWEsS0FBYixDQUFBO21CQUNBLEtBQUMsQ0FBQSxVQUFELENBQUEsRUFGYztVQUFBLENBQWxCLENBWEEsQ0FBQTtpQkFlQSxLQUFDLENBQUEsTUFBTSxDQUFDLE9BQVIsQ0FBZ0IsU0FBQyxDQUFELEdBQUE7QUFDWixZQUFBLEtBQUMsQ0FBQSxTQUFELEdBQWEsS0FBYixDQUFBO21CQUNBLEtBQUMsQ0FBQSxVQUFELENBQUEsRUFGWTtVQUFBLENBQWhCLEVBaEJKO1NBRGM7TUFBQSxFQUFBO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUFsQixFQVJJO0VBQUEsQ0FyS1IsQ0FBQTs7QUFBQSxrQkFrTUEsSUFBQSxHQUFNLFNBQUEsR0FBQTtXQUNGLElBQUMsQ0FBQSxNQUFNLENBQUMsS0FBUixDQUFjLENBQUEsU0FBQSxLQUFBLEdBQUE7YUFBQSxTQUFDLENBQUQsR0FBQTtBQUNWLFlBQUEsSUFBQTtBQUFBLFFBQUEsSUFBQSxHQUFPLE1BQUEsQ0FBTyxpQkFBUCxDQUFQLENBQUE7QUFBQSxRQUNBLEtBQUMsQ0FBQSxTQUFELENBQUEsQ0FEQSxDQUFBO0FBRUEsUUFBQSxJQUFHLElBQUEsS0FBUSxJQUFYO0FBQ0ksVUFBQSxLQUFDLENBQUEsS0FBSyxDQUFDLENBQVAsR0FBVyxDQUFDLENBQUMsT0FBRixHQUFZLEtBQUMsQ0FBQSxPQUF4QixDQUFBO0FBQUEsVUFDQSxLQUFDLENBQUEsS0FBSyxDQUFDLENBQVAsR0FBVyxDQUFDLENBQUMsT0FBRixHQUFZLEtBQUMsQ0FBQSxPQUR4QixDQUFBO0FBQUEsVUFFQSxLQUFDLENBQUEsT0FBTyxDQUFDLElBQVQsR0FBZ0IsQ0FBQSxDQUFFLE9BQUYsQ0FBVSxDQUFDLEdBQVgsQ0FBQSxDQUFBLEdBQW1CLFlBRm5DLENBQUE7QUFBQSxVQUdBLEtBQUMsQ0FBQSxPQUFPLENBQUMsU0FBVCxHQUFxQixDQUFBLENBQUUsUUFBRixDQUFXLENBQUMsR0FBWixDQUFBLENBSHJCLENBQUE7QUFBQSxVQUlBLEtBQUMsQ0FBQSxPQUFPLENBQUMsUUFBVCxDQUFrQixJQUFsQixFQUF3QixLQUFDLENBQUEsS0FBSyxDQUFDLENBQS9CLEVBQWtDLEtBQUMsQ0FBQSxLQUFLLENBQUMsQ0FBekMsQ0FKQSxDQUFBO2lCQUtBLEtBQUMsQ0FBQSxVQUFELENBQUEsRUFOSjtTQUhVO01BQUEsRUFBQTtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBZCxFQURFO0VBQUEsQ0FsTU4sQ0FBQTs7QUFBQSxrQkE4TUEsS0FBQSxHQUFPLFNBQUEsR0FBQTtBQUNILElBQUEsSUFBQyxDQUFBLE1BQU0sQ0FBQyxTQUFSLENBQWtCLENBQUEsU0FBQSxLQUFBLEdBQUE7YUFBQSxTQUFDLENBQUQsR0FBQTtBQUNkLFFBQUEsS0FBQyxDQUFBLFNBQUQsR0FBYSxJQUFiLENBQUE7QUFBQSxRQUNBLEtBQUMsQ0FBQSxTQUFELENBQUEsQ0FEQSxDQUFBO0FBQUEsUUFFQSxLQUFDLENBQUEsT0FBTyxDQUFDLE1BQVQsQ0FBZ0IsQ0FBQyxDQUFDLE9BQUYsR0FBWSxLQUFDLENBQUEsT0FBN0IsRUFBc0MsQ0FBQyxDQUFDLE9BQUYsR0FBWSxLQUFDLENBQUEsT0FBbkQsQ0FGQSxDQUFBO2VBR0EsS0FBQyxDQUFBLE9BQU8sQ0FBQyxTQUFULENBQUEsRUFKYztNQUFBLEVBQUE7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQWxCLENBQUEsQ0FBQTtBQUFBLElBTUEsSUFBQyxDQUFBLE1BQU0sQ0FBQyxTQUFSLENBQWtCLENBQUEsU0FBQSxLQUFBLEdBQUE7YUFBQSxTQUFDLENBQUQsR0FBQTtBQUNkLFFBQUEsSUFBRyxLQUFDLENBQUEsU0FBSjtBQUNJLFVBQUEsS0FBQyxDQUFBLE9BQU8sQ0FBQyxXQUFULEdBQXVCLFNBQXZCLENBQUE7QUFBQSxVQUNBLEtBQUMsQ0FBQSxPQUFPLENBQUMsTUFBVCxDQUFnQixDQUFDLENBQUMsT0FBRixHQUFZLEtBQUMsQ0FBQSxPQUE3QixFQUFzQyxDQUFDLENBQUMsT0FBRixHQUFZLEtBQUMsQ0FBQSxPQUFuRCxDQURBLENBQUE7aUJBRUEsS0FBQyxDQUFBLE9BQU8sQ0FBQyxNQUFULENBQUEsRUFISjtTQURjO01BQUEsRUFBQTtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBbEIsQ0FOQSxDQUFBO1dBWUEsSUFBQyxDQUFBLE1BQU0sQ0FBQyxPQUFSLENBQWdCLENBQUEsU0FBQSxLQUFBLEdBQUE7YUFBQSxTQUFBLEdBQUE7QUFDWixRQUFBLEtBQUMsQ0FBQSxTQUFELEdBQWEsS0FBYixDQUFBO0FBQUEsUUFDQSxLQUFDLENBQUEsT0FBTyxDQUFDLFdBQVQsR0FBdUIsQ0FBQSxDQUFFLFFBQUYsQ0FBVyxDQUFDLEdBQVosQ0FBQSxDQUR2QixDQUFBO2VBRUEsS0FBQyxDQUFBLFVBQUQsQ0FBQSxFQUhZO01BQUEsRUFBQTtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBaEIsRUFiRztFQUFBLENBOU1QLENBQUE7O0FBQUEsa0JBZ09BLE1BQUEsR0FBSyxTQUFBLEdBQUE7QUFDRCxJQUFBLElBQUMsQ0FBQSxTQUFELENBQUEsQ0FBQSxDQUFBO0FBQUEsSUFDQSxJQUFDLENBQUEsT0FBTyxDQUFDLFNBQVQsQ0FBbUIsQ0FBbkIsRUFBc0IsQ0FBdEIsRUFBeUIsSUFBQyxDQUFBLE1BQU8sQ0FBQSxDQUFBLENBQUUsQ0FBQyxLQUFwQyxFQUEyQyxJQUFDLENBQUEsTUFBTyxDQUFBLENBQUEsQ0FBRSxDQUFDLE1BQXRELENBREEsQ0FBQTtXQUVBLElBQUMsQ0FBQSxVQUFELENBQVksUUFBWixFQUhDO0VBQUEsQ0FoT0wsQ0FBQTs7QUFBQSxrQkFxT0EsU0FBQSxHQUFXLFNBQUMsSUFBRCxFQUFPLFNBQVAsR0FBQTtBQUNQLElBQUEsU0FBQSxHQUFZLFNBQUEsSUFBYSxLQUF6QixDQUFBO0FBQ0EsSUFBQSxJQUFBLENBQUEsU0FBQTtBQUFBLE1BQUEsSUFBQyxDQUFBLFNBQUQsR0FBYSxFQUFiLENBQUE7S0FEQTtXQUVBLENBQUMsSUFBQSxJQUFRLElBQUMsQ0FBQSxTQUFWLENBQW9CLENBQUMsSUFBckIsQ0FBMEIsSUFBQyxDQUFBLE1BQU8sQ0FBQSxDQUFBLENBQUUsQ0FBQyxTQUFYLENBQUEsQ0FBMUIsRUFITztFQUFBLENBck9YLENBQUE7O0FBQUEsa0JBME9BLElBQUEsR0FBTSxTQUFBLEdBQUE7V0FDRixJQUFDLENBQUEsWUFBRCxDQUFjLElBQUMsQ0FBQSxTQUFmLEVBQTBCLElBQUMsQ0FBQSxTQUEzQixFQURFO0VBQUEsQ0ExT04sQ0FBQTs7QUFBQSxrQkE2T0EsSUFBQSxHQUFNLFNBQUEsR0FBQTtXQUNGLElBQUMsQ0FBQSxZQUFELENBQWMsSUFBQyxDQUFBLFNBQWYsRUFBMEIsSUFBQyxDQUFBLFNBQTNCLEVBREU7RUFBQSxDQTdPTixDQUFBOztBQUFBLGtCQWdQQSxZQUFBLEdBQWMsU0FBQyxHQUFELEVBQU0sSUFBTixHQUFBO0FBQ1YsUUFBQSxrQkFBQTtBQUFBLElBQUEsSUFBRyxHQUFHLENBQUMsTUFBUDtBQUNJLE1BQUEsSUFBQyxDQUFBLFNBQUQsQ0FBVyxJQUFYLEVBQWlCLElBQWpCLENBQUEsQ0FBQTtBQUFBLE1BQ0EsYUFBQSxHQUFnQixHQUFHLENBQUMsR0FBSixDQUFBLENBRGhCLENBQUE7QUFBQSxNQUVBLEdBQUEsR0FBVSxJQUFBLEtBQUEsQ0FBQSxDQUZWLENBQUE7QUFBQSxNQUdBLEdBQUcsQ0FBQyxHQUFKLEdBQVUsYUFIVixDQUFBO2FBSUEsR0FBRyxDQUFDLE1BQUosR0FBWSxDQUFBLFNBQUEsS0FBQSxHQUFBO2VBQUEsU0FBQSxHQUFBO0FBQ1IsVUFBQSxLQUFDLENBQUEsT0FBTyxDQUFDLFNBQVQsQ0FBbUIsQ0FBbkIsRUFBc0IsQ0FBdEIsRUFBeUIsS0FBQyxDQUFBLE1BQU8sQ0FBQSxDQUFBLENBQUUsQ0FBQyxLQUFwQyxFQUEyQyxLQUFDLENBQUEsTUFBTyxDQUFBLENBQUEsQ0FBRSxDQUFDLE1BQXRELENBQUEsQ0FBQTtpQkFDQSxLQUFDLENBQUEsT0FBTyxDQUFDLFNBQVQsQ0FBbUIsR0FBbkIsRUFBd0IsQ0FBeEIsRUFBMkIsQ0FBM0IsRUFBOEIsS0FBQyxDQUFBLE1BQU8sQ0FBQSxDQUFBLENBQUUsQ0FBQyxLQUF6QyxFQUFnRCxLQUFDLENBQUEsTUFBTyxDQUFBLENBQUEsQ0FBRSxDQUFDLE1BQTNELEVBQW1FLENBQW5FLEVBQXNFLENBQXRFLEVBQXlFLEtBQUMsQ0FBQSxNQUFPLENBQUEsQ0FBQSxDQUFFLENBQUMsS0FBcEYsRUFBMkYsS0FBQyxDQUFBLE1BQU8sQ0FBQSxDQUFBLENBQUUsQ0FBQyxNQUF0RyxFQUZRO1FBQUEsRUFBQTtNQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsRUFMaEI7S0FEVTtFQUFBLENBaFBkLENBQUE7O2VBQUE7O0lBSEosQ0FBQTs7QUFBQSxLQThQQSxHQUFZLElBQUEsS0FBQSxDQUFNLFFBQU4sQ0E5UFosQ0FBQSIsImZpbGUiOiJwYWludC5qcyIsInNvdXJjZVJvb3QiOiIvc291cmNlLyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiXG5cbmNsYXNzIFBhaW50XG4gICAgY29uc3RydWN0b3I6IChjYW52YXMpIC0+XG4gICAgICAgIEBjYW52YXMgPSAkKCcjJysgY2FudmFzKVxuXG4gICAgICAgIEBjb250ZXh0ID0gQGNhbnZhc1swXS5nZXRDb250ZXh0KCcyZCcpXG4gICAgICAgIEBjb250ZXh0LmxpbmVKb2luID0gJ3JvdW5kJ1xuICAgICAgICBAY29udGV4dC5saW5lQ2FwID0gJ3JvdW5kJ1xuICAgICAgICBAY2FudmFzT2Zmc2V0ID0gQGNhbnZhcy5vZmZzZXQoKVxuICAgICAgICBAbW91c2UgPSB7eDogMCwgeTogMH1cbiAgICAgICAgQHJlZG9fbGlzdCA9IFtdXG4gICAgICAgIEB1bmRvX2xpc3QgPSBbXVxuXG4gICAgICAgICQoJyNzaXplJykuYmluZCAnbW91c2Vtb3ZlIGNoYW5nZScsID0+XG4gICAgICAgICAgICAkKCcjc2l6ZXB4JykudGV4dCgkKCcjc2l6ZScpLnZhbCgpKVxuXG4gICAgICAgICQoXCIjZmlsbFwiKS5jaGFuZ2UgKGUpID0+XG4gICAgICAgICAgICBAaW5pdENhbnZhcygpXG5cbiAgICAgICAgJCgnYnV0dG9uJykuY2xpY2sgKGUpID0+XG4gICAgICAgICAgICBpZiAoZS50YXJnZXQuaWQgPT0gXCJzYXZlXCIpXG4gICAgICAgICAgICAgICAgd2luZG93Lm9wZW4oQGNhbnZhc1swXS50b0RhdGFVUkwoKSlcbiAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIGlmIChlLnRhcmdldC5pZCA9PSBcInJlZG9cIilcbiAgICAgICAgICAgICAgICBAcmVkbygpXG4gICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICBpZihlLnRhcmdldC5pZCA9PSBcInVuZG9cIilcbiAgICAgICAgICAgICAgICBAdW5kbygpXG4gICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICBAc2VsZWN0VG9vbChlLnRhcmdldC5pZClcbiAgICAgICAgQGluaXRDYW52YXMoKVxuXG4gICAgc2VsZWN0VG9vbDogKHRvb2wpIC0+XG4gICAgICAgIEB0b29sID0gdG9vbFxuICAgICAgICAkKCcuYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpXG4gICAgICAgICQoJyMnK0B0b29sKS5hZGRDbGFzcygnYWN0aXZlJylcbiAgICAgICAgQGluaXRDYW52YXMoKVxuXG4gICAgaW5pdENhbnZhczogLT5cbiAgICAgICAgQGNhbnZhcy51bmJpbmQoXCJtb3VzZW1vdmVcIikudW5iaW5kKFwibW91c2V1cFwiKS51bmJpbmQoXCJtb3VzZWRvd25cIikudW5iaW5kKFwiY2xpY2tcIilcbiAgICAgICAgQGNhbnZhcy5jb250ZXh0bWVudSAoZSkgPT5cbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICBAZXZfY2FudmFzKClcbiAgICAgICAgaWYoQHRvb2wgIT0gJ3RleHQnICYmIEB0b29sICE9J3BpY2tlcicgJiYgQHRvb2wgIT0gJ3VuZG8nICYmIEB0b29sICE9ICdyZWRvJylcbiAgICAgICAgICAgIEBjYW52YXMuYmluZCAnbW91c2Vkb3duIG1vdXNlbW92ZSBtb3VzZXVwJywgQGV2X2NhbnZhc1xuXG4gICAgZXZfY2FudmFzOiA9PlxuICAgICAgICBAY29udGV4dC5zdHJva2VTdHlsZSA9ICQoJyNjb2xvcicpLnZhbCgpXG4gICAgICAgIEBjb250ZXh0LmZpbGxTdHlsZSA9ICQoJyNjb2xvcjInKS52YWwoKVxuICAgICAgICBAY29udGV4dC5saW5lV2lkdGggPSAkKCcjc2l6ZScpLnZhbCgpXG4gICAgICAgIEBvZmZzZXRYID0gQGNhbnZhc09mZnNldC5sZWZ0XG4gICAgICAgIEBvZmZzZXRZID0gQGNhbnZhc09mZnNldC50b3BcbiAgICAgICAgc3dpdGNoIEB0b29sXG4gICAgICAgICAgICB3aGVuIFwicGlja2VyXCJcbiAgICAgICAgICAgICAgICBAcGlja2VyKClcbiAgICAgICAgICAgIHdoZW4gXCJsaW5lXCJcbiAgICAgICAgICAgICAgICBAbGluZSgpXG4gICAgICAgICAgICB3aGVuIFwiY2FyZVwiXG4gICAgICAgICAgICAgICAgQGNhcmUoKVxuICAgICAgICAgICAgd2hlbiBcImNpcmNsZVwiXG4gICAgICAgICAgICAgICAgQGNpcmNsZSgpXG4gICAgICAgICAgICB3aGVuIFwiZ29tbWVcIlxuICAgICAgICAgICAgICAgIEBnb21tZSgpXG4gICAgICAgICAgICB3aGVuIFwibmV3XCJcbiAgICAgICAgICAgICAgICBAbmV3KClcbiAgICAgICAgICAgIHdoZW4gXCJ0ZXh0XCJcbiAgICAgICAgICAgICAgICBAdGV4dCgpXG4gICAgICAgICAgICB3aGVuIFwic2F2ZVwiXG4gICAgICAgICAgICAgICAgQHNhdmUoKVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIEBwZW5jaWwoKVxuXG4gICAgcGlja2VyOiAtPlxuICAgICAgICBAY2FudmFzLm1vdXNlZG93biAoZSkgPT5cbiAgICAgICAgICAgIHRtcCA9IEBjb250ZXh0LmdldEltYWdlRGF0YShlLmNsaWVudFggLSBAb2Zmc2V0WCwgZS5jbGllbnRZIC0gQG9mZnNldFksIDEgLDEpXG4gICAgICAgICAgICBjb21wb25lbnRUb0hleCA9IChjb2xvcikgLT5cbiAgICAgICAgICAgICAgICBoZXggPSBjb2xvci50b1N0cmluZygxNilcbiAgICAgICAgICAgICAgICAoaWYgaGV4Lmxlbmd0aCBpcyAxIHRoZW4gXCIwXCIgKyBoZXggZWxzZSBoZXgpXG4gICAgICAgICAgICByZ2JUb0hleCA9IChyLCBnLCBiKSAtPlxuICAgICAgICAgICAgICAgIFwiI1wiICsgY29tcG9uZW50VG9IZXgocikgKyBjb21wb25lbnRUb0hleChnKSArIGNvbXBvbmVudFRvSGV4KGIpXG5cbiAgICAgICAgICAgIGlmKGV2ZW50LndoaWNoID09IDEpXG4gICAgICAgICAgICAgICAgaWYodG1wLmRhdGFbM10gPT0gMClcbiAgICAgICAgICAgICAgICAgICAgJCgnI2NvbG9yJykudmFsKFwiI2ZmZmZmZlwiKVxuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgJCgnI2NvbG9yJykudmFsKHJnYlRvSGV4KHRtcC5kYXRhWzBdLCB0bXAuZGF0YVsxXSwgdG1wLmRhdGFbMl0pKVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGlmKHRtcC5kYXRhWzNdID09IDApXG4gICAgICAgICAgICAgICAgICAgICQoJyNjb2xvcjInKS52YWwoXCIjZmZmZmZmXCIpXG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAkKCcjY29sb3IyJykudmFsKHJnYlRvSGV4KHRtcC5kYXRhWzBdLCB0bXAuZGF0YVsxXSwgdG1wLmRhdGFbMl0pKVxuXG4gICAgcGVuY2lsOiAtPlxuICAgICAgICBAY2FudmFzLm1vdXNlZG93biAoZSkgPT5cbiAgICAgICAgICAgIEBpc0RyYXdpbmcgPSB0cnVlXG4gICAgICAgICAgICBAc2F2ZVN0YXRlKClcbiAgICAgICAgICAgIEBjb250ZXh0Lm1vdmVUbyBlLmNsaWVudFggLSBAb2Zmc2V0WCwgZS5jbGllbnRZIC0gQG9mZnNldFlcbiAgICAgICAgICAgIEBjb250ZXh0LmJlZ2luUGF0aCgpXG4gICAgICAgICAgICBAY29udGV4dC5hcmMoZS5jbGllbnRYIC0gQG9mZnNldFgsIGUuY2xpZW50WSAtIEBvZmZzZXRZLCAkKCcjc2l6ZScpLnZhbCgpIC8gMTAwLCAwLCAyKk1hdGguUEkpXG4gICAgICAgICAgICBAY29udGV4dC5zdHJva2UoKVxuXG4gICAgICAgIEBjYW52YXMubW91c2Vtb3ZlIChlKSA9PlxuICAgICAgICAgICAgaWYgQGlzRHJhd2luZ1xuICAgICAgICAgICAgICAgIEBjb250ZXh0LmxpbmVUbyBlLmNsaWVudFggLSBAb2Zmc2V0WCwgZS5jbGllbnRZIC0gQG9mZnNldFlcbiAgICAgICAgICAgICAgICBAY29udGV4dC5zdHJva2UoKVxuXG4gICAgICAgIEBjYW52YXMubW91c2V1cCAoKSA9PlxuICAgICAgICAgICAgQGlzRHJhd2luZyA9IGZhbHNlXG4gICAgICAgICAgICBAaW5pdENhbnZhcygpXG5cbiAgICBsaW5lOiAtPlxuICAgICAgICBAY2FudmFzLm1vdXNlZG93biAoZSkgPT5cbiAgICAgICAgICAgIEBpc0RyYXdpbmcgPSB0cnVlXG4gICAgICAgICAgICBAc2F2ZVN0YXRlKClcbiAgICAgICAgICAgIEBtb3VzZS54ID0gZS5jbGllbnRYIC0gQG9mZnNldFhcbiAgICAgICAgICAgIEBtb3VzZS55ID0gZS5jbGllbnRZIC0gQG9mZnNldFlcbiAgICAgICAgICAgIEB0bXAgPSBAY29udGV4dC5nZXRJbWFnZURhdGEoMCwgMCwgQGNhbnZhc1swXS53aWR0aCwgQGNhbnZhc1swXS5oZWlnaHQpXG5cbiAgICAgICAgQGNhbnZhcy5tb3VzZW1vdmUgKGUpID0+XG4gICAgICAgICAgICBpZiBAaXNEcmF3aW5nXG4gICAgICAgICAgICAgICAgQGNvbnRleHQuY2xlYXJSZWN0KDAsIDAsIEBjYW52YXNbMF0ud2lkdGgsIEBjYW52YXNbMF0uaGVpZ2h0KVxuICAgICAgICAgICAgICAgIEBjb250ZXh0LmJlZ2luUGF0aCgpXG4gICAgICAgICAgICAgICAgQGNvbnRleHQucHV0SW1hZ2VEYXRhKEB0bXAsMCwwKVxuICAgICAgICAgICAgICAgIEBjb250ZXh0Lm1vdmVUbyhAbW91c2UueCwgQG1vdXNlLnkpXG4gICAgICAgICAgICAgICAgQGNvbnRleHQubGluZVRvKGUuY2xpZW50WCAtIEBvZmZzZXRYLCBlLmNsaWVudFkgLSBAb2Zmc2V0WSlcbiAgICAgICAgICAgICAgICBAY29udGV4dC5jbG9zZVBhdGgoKVxuICAgICAgICAgICAgICAgIEBjb250ZXh0LnN0cm9rZSgpXG5cbiAgICAgICAgICAgICAgICBAY2FudmFzLm1vdXNlZG93biAoZSkgPT5cbiAgICAgICAgICAgICAgICAgICAgQGlzRHJhd2luZyA9IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgIEBpbml0Q2FudmFzKClcblxuICAgICAgICAgICAgICAgIEBjYW52YXMubW91c2V1cCAoZSkgPT5cbiAgICAgICAgICAgICAgICAgICAgQGlzRHJhd2luZyA9IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgIEBpbml0Q2FudmFzKClcblxuICAgIGNhcmU6IC0+XG4gICAgICAgIEBjYW52YXMubW91c2Vkb3duIChlKSA9PlxuICAgICAgICAgICAgQGlzRHJhd2luZyA9IHRydWVcbiAgICAgICAgICAgIEBzYXZlU3RhdGUoKVxuICAgICAgICAgICAgQG1vdXNlLnggPSBlLmNsaWVudFggLSBAb2Zmc2V0WFxuICAgICAgICAgICAgQG1vdXNlLnkgPSBlLmNsaWVudFkgLSBAb2Zmc2V0WVxuICAgICAgICAgICAgQHRtcCA9IEBjb250ZXh0LmdldEltYWdlRGF0YSgwLCAwLCBAY2FudmFzWzBdLndpZHRoLCBAY2FudmFzWzBdLmhlaWdodClcblxuICAgICAgICBAY2FudmFzLm1vdXNlbW92ZSAoZSkgPT5cbiAgICAgICAgICAgIGlmIEBpc0RyYXdpbmdcbiAgICAgICAgICAgICAgICB4ID0gTWF0aC5taW4oZS5jbGllbnRYIC0gQG9mZnNldFgsICBAbW91c2UueClcbiAgICAgICAgICAgICAgICB5ID0gTWF0aC5taW4oZS5jbGllbnRZIC0gQG9mZnNldFksICBAbW91c2UueSlcbiAgICAgICAgICAgICAgICB3ID0gTWF0aC5hYnMoZS5jbGllbnRYIC0gQG9mZnNldFggLSBAbW91c2UueClcbiAgICAgICAgICAgICAgICBoID0gTWF0aC5hYnMoZS5jbGllbnRZIC0gQG9mZnNldFkgLSBAbW91c2UueSlcbiAgICAgICAgICAgICAgICBAY29udGV4dC5jbGVhclJlY3QoMCwgMCwgQGNhbnZhc1swXS53aWR0aCwgQGNhbnZhc1swXS5oZWlnaHQpXG4gICAgICAgICAgICAgICAgQGNvbnRleHQucHV0SW1hZ2VEYXRhKEB0bXAsMCwwKVxuICAgICAgICAgICAgICAgIEBjb250ZXh0LmJlZ2luUGF0aCgpXG4gICAgICAgICAgICAgICAgQGNvbnRleHQucmVjdCh4LCB5LCB3LCBoKVxuICAgICAgICAgICAgICAgIEBjb250ZXh0LmNsb3NlUGF0aCgpXG4gICAgICAgICAgICAgICAgaWYgKCQoXCIjZmlsbFwiKS5pcyhcIjpjaGVja2VkXCIpKVxuICAgICAgICAgICAgICAgICAgICBAY29udGV4dC5maWxsKClcbiAgICAgICAgICAgICAgICBAY29udGV4dC5zdHJva2UoKVxuXG4gICAgICAgICAgICAgICAgQGNhbnZhcy5tb3VzZWRvd24gKGUpID0+XG4gICAgICAgICAgICAgICAgICAgIEBpc0RyYXdpbmcgPSBmYWxzZVxuICAgICAgICAgICAgICAgICAgICBAaW5pdENhbnZhcygpXG5cbiAgICAgICAgICAgICAgICBAY2FudmFzLm1vdXNldXAgKGUpID0+XG4gICAgICAgICAgICAgICAgICAgIEBpc0RyYXdpbmcgPSBmYWxzZVxuICAgICAgICAgICAgICAgICAgICBAaW5pdENhbnZhcygpXG5cbiAgICBjaXJjbGU6IC0+XG4gICAgICAgIEBjYW52YXMubW91c2Vkb3duIChlKSA9PlxuICAgICAgICAgICAgQGlzRHJhd2luZyA9IHRydWVcbiAgICAgICAgICAgIEBzYXZlU3RhdGUoKVxuICAgICAgICAgICAgQG1vdXNlLnggPSBlLmNsaWVudFggLSBAb2Zmc2V0WFxuICAgICAgICAgICAgQG1vdXNlLnkgPSBlLmNsaWVudFkgLSBAb2Zmc2V0WVxuICAgICAgICAgICAgQHRtcCA9IEBjb250ZXh0LmdldEltYWdlRGF0YSgwLCAwLCBAY2FudmFzWzBdLndpZHRoLCBAY2FudmFzWzBdLmhlaWdodClcblxuICAgICAgICBAY2FudmFzLm1vdXNlbW92ZSAoZSkgPT5cbiAgICAgICAgICAgIGlmIEBpc0RyYXdpbmdcbiAgICAgICAgICAgICAgICB4MiA9IE1hdGguYWJzKGUuY2xpZW50WCAtIEBvZmZzZXRYKVxuICAgICAgICAgICAgICAgIHkyID0gTWF0aC5hYnMoZS5jbGllbnRZIC0gQG9mZnNldFkpXG4gICAgICAgICAgICAgICAgciA9IE1hdGguc3FydChNYXRoLnBvdygoeDIgLSBAbW91c2UueCksIDIpICsgTWF0aC5wb3coKHkyIC0gQG1vdXNlLnkpLCAyKSlcbiAgICAgICAgICAgICAgICBAY29udGV4dC5jbGVhclJlY3QoMCwgMCwgQGNhbnZhc1swXS53aWR0aCwgQGNhbnZhc1swXS5oZWlnaHQpXG4gICAgICAgICAgICAgICAgQGNvbnRleHQucHV0SW1hZ2VEYXRhKEB0bXAsMCwwKVxuICAgICAgICAgICAgICAgIEBjb250ZXh0LmJlZ2luUGF0aCgpXG4gICAgICAgICAgICAgICAgQGNvbnRleHQuYXJjKEBtb3VzZS54LCBAbW91c2UueSwgciwgMCwgMipNYXRoLlBJKVxuICAgICAgICAgICAgICAgIGlmICgkKFwiI2ZpbGxcIikuaXMoXCI6Y2hlY2tlZFwiKSlcbiAgICAgICAgICAgICAgICAgICAgQGNvbnRleHQuZmlsbCgpXG4gICAgICAgICAgICAgICAgQGNvbnRleHQuc3Ryb2tlKClcblxuICAgICAgICAgICAgICAgIEBjYW52YXMubW91c2Vkb3duIChlKSA9PlxuICAgICAgICAgICAgICAgICAgICBAaXNEcmF3aW5nID0gZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgQGluaXRDYW52YXMoKVxuXG4gICAgICAgICAgICAgICAgQGNhbnZhcy5tb3VzZXVwIChlKSA9PlxuICAgICAgICAgICAgICAgICAgICBAaXNEcmF3aW5nID0gZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgQGluaXRDYW52YXMoKVxuXG4gICAgdGV4dDogLT5cbiAgICAgICAgQGNhbnZhcy5jbGljayAoZSkgPT5cbiAgICAgICAgICAgIHRleHQgPSBwcm9tcHQoXCJSZW50cmUgdG9uIHRleHRcIilcbiAgICAgICAgICAgIEBzYXZlU3RhdGUoKVxuICAgICAgICAgICAgaWYodGV4dCAhPSBudWxsKVxuICAgICAgICAgICAgICAgIEBtb3VzZS54ID0gZS5jbGllbnRYIC0gQG9mZnNldFhcbiAgICAgICAgICAgICAgICBAbW91c2UueSA9IGUuY2xpZW50WSAtIEBvZmZzZXRZXG4gICAgICAgICAgICAgICAgQGNvbnRleHQuZm9udCA9ICQoJyNzaXplJykudmFsKCkgKyBcInB0IENhbGlicmlcIlxuICAgICAgICAgICAgICAgIEBjb250ZXh0LmZpbGxTdHlsZSA9ICQoJyNjb2xvcicpLnZhbCgpXG4gICAgICAgICAgICAgICAgQGNvbnRleHQuZmlsbFRleHQodGV4dCwgQG1vdXNlLngsIEBtb3VzZS55KVxuICAgICAgICAgICAgICAgIEBpbml0Q2FudmFzKClcblxuICAgIGdvbW1lOiAtPlxuICAgICAgICBAY2FudmFzLm1vdXNlZG93biAoZSkgPT5cbiAgICAgICAgICAgIEBpc0RyYXdpbmcgPSB0cnVlXG4gICAgICAgICAgICBAc2F2ZVN0YXRlKClcbiAgICAgICAgICAgIEBjb250ZXh0Lm1vdmVUbyBlLmNsaWVudFggLSBAb2Zmc2V0WCwgZS5jbGllbnRZIC0gQG9mZnNldFlcbiAgICAgICAgICAgIEBjb250ZXh0LmJlZ2luUGF0aCgpXG5cbiAgICAgICAgQGNhbnZhcy5tb3VzZW1vdmUgKGUpID0+XG4gICAgICAgICAgICBpZiBAaXNEcmF3aW5nXG4gICAgICAgICAgICAgICAgQGNvbnRleHQuc3Ryb2tlU3R5bGUgPSBcIiNGRkZGRkZcIlxuICAgICAgICAgICAgICAgIEBjb250ZXh0LmxpbmVUbyBlLmNsaWVudFggLSBAb2Zmc2V0WCwgZS5jbGllbnRZIC0gQG9mZnNldFlcbiAgICAgICAgICAgICAgICBAY29udGV4dC5zdHJva2UoKVxuXG4gICAgICAgIEBjYW52YXMubW91c2V1cCAoKSA9PlxuICAgICAgICAgICAgQGlzRHJhd2luZyA9IGZhbHNlXG4gICAgICAgICAgICBAY29udGV4dC5zdHJva2VTdHlsZSA9ICQoJyNjb2xvcicpLnZhbCgpXG4gICAgICAgICAgICBAaW5pdENhbnZhcygpXG5cbiAgICBuZXc6IC0+XG4gICAgICAgIEBzYXZlU3RhdGUoKVxuICAgICAgICBAY29udGV4dC5jbGVhclJlY3QoMCwgMCwgQGNhbnZhc1swXS53aWR0aCwgQGNhbnZhc1swXS5oZWlnaHQpXG4gICAgICAgIEBzZWxlY3RUb29sKFwicGVuY2lsXCIpXG5cbiAgICBzYXZlU3RhdGU6IChsaXN0LCBrZWVwX3JlZG8pIC0+XG4gICAgICAgIGtlZXBfcmVkbyA9IGtlZXBfcmVkbyBvciBmYWxzZVxuICAgICAgICBAcmVkb19saXN0ID0gW10gIHVubGVzcyBrZWVwX3JlZG9cbiAgICAgICAgKGxpc3Qgb3IgQHVuZG9fbGlzdCkucHVzaCBAY2FudmFzWzBdLnRvRGF0YVVSTCgpXG5cbiAgICB1bmRvOiAtPlxuICAgICAgICBAcmVzdG9yZVN0YXRlIEB1bmRvX2xpc3QsIEByZWRvX2xpc3RcblxuICAgIHJlZG86IC0+XG4gICAgICAgIEByZXN0b3JlU3RhdGUgQHJlZG9fbGlzdCwgQHVuZG9fbGlzdFxuXG4gICAgcmVzdG9yZVN0YXRlOiAocG9wLCBwdXNoKSAtPlxuICAgICAgICBpZiBwb3AubGVuZ3RoXG4gICAgICAgICAgICBAc2F2ZVN0YXRlIHB1c2gsIHRydWVcbiAgICAgICAgICAgIHJlc3RvcmVfc3RhdGUgPSBwb3AucG9wKClcbiAgICAgICAgICAgIGltZyA9IG5ldyBJbWFnZSgpXG4gICAgICAgICAgICBpbWcuc3JjID0gcmVzdG9yZV9zdGF0ZVxuICAgICAgICAgICAgaW1nLm9ubG9hZD0gPT5cbiAgICAgICAgICAgICAgICBAY29udGV4dC5jbGVhclJlY3QoMCwgMCwgQGNhbnZhc1swXS53aWR0aCwgQGNhbnZhc1swXS5oZWlnaHQpXG4gICAgICAgICAgICAgICAgQGNvbnRleHQuZHJhd0ltYWdlKGltZywgMCwgMCwgQGNhbnZhc1swXS53aWR0aCwgQGNhbnZhc1swXS5oZWlnaHQsIDAsIDAsIEBjYW52YXNbMF0ud2lkdGgsIEBjYW52YXNbMF0uaGVpZ2h0KVxuXG5cbnBhaW50ID0gbmV3IFBhaW50KCdjYW52YXMnKVxuIl19